(this["webpackJsonpmy-box"]=this["webpackJsonpmy-box"]||[]).push([[0],{130:function(e,t){},264:function(e,t,n){},286:function(e,t,n){},302:function(e,t){},304:function(e,t){},387:function(e,t){},388:function(e,t){},427:function(e,t){},530:function(e,t){},582:function(e,t){},596:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n.n(r),a=n(253),o=n.n(a),s=(n(264),n(115)),i=n(0),u=n.n(i),f=n(7),p=n(32),l=n(157),b=n.n(l),j=(n(286),n(259)),h=n(160),m=n(38),d=function(){console.log(h.parse(window.location.search.slice(1)));var e=h.parse(window.location.search.slice(1)),t=e.box,n=e.content;if(t&&n)return{box:t,content:n.split(",")};throw Error("url has problem")},x=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onloadend=function(e){return t(r.result)},r.onerror=function(){return n}}))};var O=function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(p.a)(a,2),i=o[0],l=o[1],h=Object(r.useState)(!1),O=Object(p.a)(h,2),w=O[0],g=O[1],v=Object(r.useState)(""),y=Object(p.a)(v,2),k=y[0],F=y[1],S=Object(r.useState)({message:"",show:!1}),P=Object(p.a)(S,2),N=P[0],B=P[1],U=function(e){B({message:e,show:!0})},E=function(){var e=Object(f.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.log("borg not connected"),e.abrupt("return");case 3:return e.prev=3,e.next=6,n.connect(k);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),U(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();function I(){return A.apply(this,arguments)}function A(){return(A=Object(f.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)();case 2:return t=e.sent,t.getNode().connectionManager.on("peer:disconnect",function(){var e=Object(f.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.remotePeer.toB58String()===k&&(g(!1),setTimeout((function(){k&&E()}),1e3));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){Object(f.a)(u.a.mark((function e(){var t,n,r,a,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=d(),n=t.box,r=t.content,e.next=4,I();case 4:if(a=e.sent,c(a),"string"!==typeof n){e.next=13;break}return F(n),e.t0=g,e.next=11,a.connect(n);case 11:e.t1=e.sent,(0,e.t0)(e.t1);case 13:return e.next=15,Promise.all(r.map((function(e){return l((function(e){return[].concat(Object(s.a)(e),[{loading:!0,imageUri:""}])})),a.receiveFile(e)})));case 15:return o=e.sent,e.next=18,Promise.all(o.map(function(){var e=Object(f.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return e.t0=e.sent,e.abrupt("return",{loading:!1,imageUri:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 18:i=e.sent,l(i),console.log(i),e.next=26;break;case 23:e.prev=23,e.t2=e.catch(0),U(e.t2.message);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})))()}),[]),Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("div",{className:"Container",children:[N.show?Object(m.jsx)("p",{children:N.message}):"",N.show||w?"":Object(m.jsx)(b.a,{type:"Puff",color:"#00BFFF",height:80,width:80}),Object(m.jsx)("div",{className:"ImageContainer",children:!N.show&&w?i.map((function(e){return e.loading?Object(m.jsx)(b.a,{type:"Puff",color:"#00BFFF",height:80,width:80}):Object(m.jsx)("img",{className:"Image",src:e.imageUri,alt:"not ready"})})):""})]})})};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root"))}},[[596,1,2]]]);
//# sourceMappingURL=main.42f3e940.chunk.js.map